---
title: Устранение неполадок подсистемы Windows для Linux
description: Содержит подробные сведения о распространенных ошибках и проблемах, с которыми сталкиваются пользователи при выполнении Linux в подсистеме Windows для Linux.
keywords: BashOnWindows, bash, wsl, windows, windowssubsystem, ubuntu
author: scooley
ms.author: scooley
ms.date: 11/15/2017
ms.topic: article
ms.assetid: 6753f1b2-200e-49cc-93a5-4323e1117246
ms.custom: seodec18
ms.localizationpriority: high
ms.openlocfilehash: a73de13853c124de38cae1b9c6c51d0ee9978d44
ms.sourcegitcommit: f1780bf174c67c531864497ae78cf3f26ef68503
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2019
ms.locfileid: "71205976"
---
# <a name="troubleshooting-windows-subsystem-for-linux"></a><span data-ttu-id="37ad5-104">Устранение неполадок подсистемы Windows для Linux</span><span class="sxs-lookup"><span data-stu-id="37ad5-104">Troubleshooting Windows Subsystem for Linux</span></span>

### <a name="bash-loses-network-connectivity-once-connected-to-a-vpn"></a><span data-ttu-id="37ad5-105">Bash утрачивает подключение к сети после подключения к сети VPN</span><span class="sxs-lookup"><span data-stu-id="37ad5-105">Bash loses network connectivity once connected to a VPN</span></span>

<span data-ttu-id="37ad5-106">Если после подключения к VPN в Windows оболочка Bash утрачивает подключение к сети, попробуйте воспользоваться этим обходным решением в Bash.</span><span class="sxs-lookup"><span data-stu-id="37ad5-106">If after connecting to a VPN on Windows, bash loses network connectivity, try this workaround from within bash.</span></span> <span data-ttu-id="37ad5-107">Это решение позволит вручную переопределить разрешение DNS с помощью `/etc/resolv.conf`.</span><span class="sxs-lookup"><span data-stu-id="37ad5-107">This workaround will allow you to manually override the DNS resolution through `/etc/resolv.conf`.</span></span>

1. <span data-ttu-id="37ad5-108">Запишите DNS-сервер виртуальной частной сети. Для этого выполните `ipconfig.exe /all`</span><span class="sxs-lookup"><span data-stu-id="37ad5-108">Take a note of the DNS server of the VPN from doing `ipconfig.exe /all`</span></span>
2. <span data-ttu-id="37ad5-109">Создайте копию существующего resolv.conf, выполнив `sudo cp /etc/resolv.conf /etc/resolv.conf.new`</span><span class="sxs-lookup"><span data-stu-id="37ad5-109">Make a copy of the existing resolv.conf `sudo cp /etc/resolv.conf /etc/resolv.conf.new`</span></span>
3. <span data-ttu-id="37ad5-110">Удалить связь с текущим resolv.con, выполнив `sudo unlink /etc/resolv.conf`</span><span class="sxs-lookup"><span data-stu-id="37ad5-110">Unlink the current resolv.con `sudo unlink /etc/resolv.conf`</span></span>
4. `sudo mv /etc/resolv.conf.new /etc/resolv.conf`
5. <span data-ttu-id="37ad5-111">Откройте `/etc/resolv.conf` и сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="37ad5-111">Open `/etc/resolv.conf` and</span></span> <br/>
   <span data-ttu-id="37ad5-112">а)</span><span class="sxs-lookup"><span data-stu-id="37ad5-112">a.</span></span> <span data-ttu-id="37ad5-113">Удалите из файла первую строку с текстом "\# This file was automatically generated by WSL.</span><span class="sxs-lookup"><span data-stu-id="37ad5-113">Delete the first line from the file, which says "\# This file was automatically generated by WSL.</span></span> <span data-ttu-id="37ad5-114">To stop automatic generation of this file, remove this line." (Этот файл был автоматически создан WSL. Чтобы остановить автоматическое создание этого файла, удалите данную строку).</span><span class="sxs-lookup"><span data-stu-id="37ad5-114">To stop automatic generation of this file, remove this line.".</span></span> <br/>
   <span data-ttu-id="37ad5-115">б.</span><span class="sxs-lookup"><span data-stu-id="37ad5-115">b.</span></span> <span data-ttu-id="37ad5-116">Добавьте запись DNS из пункта 1 выше в качестве первой записи в списке DNS-серверов.</span><span class="sxs-lookup"><span data-stu-id="37ad5-116">Add the DNS entry from (1) above as the very first entry in the list of DNS servers.</span></span> <br/>
   <span data-ttu-id="37ad5-117">в.</span><span class="sxs-lookup"><span data-stu-id="37ad5-117">c.</span></span> <span data-ttu-id="37ad5-118">Закройте файл.</span><span class="sxs-lookup"><span data-stu-id="37ad5-118">Close the file.</span></span> <br/>

<span data-ttu-id="37ad5-119">После отключения VPN необходимо будет отменить изменения в `/etc/resolv.conf`.</span><span class="sxs-lookup"><span data-stu-id="37ad5-119">Once you have disconnected the VPN, you will have to revert the changes to `/etc/resolv.conf`.</span></span> <span data-ttu-id="37ad5-120">Для этого сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="37ad5-120">To do this, do:</span></span>
1. `cd /etc`
2. `sudo mv resolv.conf resolv.conf.new`
3. `sudo ln -s ../run/resolvconf/resolv.conf resolv.conf`

### <a name="starting-wsl-or-installing-a-distribution-returns-an-error-code"></a><span data-ttu-id="37ad5-121">При запуске WSL или установке дистрибутива возвращается код ошибки</span><span class="sxs-lookup"><span data-stu-id="37ad5-121">Starting WSL or installing a distribution returns an error code</span></span>

<span data-ttu-id="37ad5-122">Выполните [эти инструкции](https://github.com/Microsoft/WSL/blob/master/CONTRIBUTING.md#8-detailed-logs), чтобы получить подробные журналы и сообщить о возникшей проблеме на портале GitHub.</span><span class="sxs-lookup"><span data-stu-id="37ad5-122">Follow [these instructions](https://github.com/Microsoft/WSL/blob/master/CONTRIBUTING.md#8-detailed-logs) to collect detailed logs and file an issue on our GitHub.</span></span>

### <a name="updating-bash-on-ubuntu-on-windows"></a><span data-ttu-id="37ad5-123">Обновление Bash для Ubuntu в Windows</span><span class="sxs-lookup"><span data-stu-id="37ad5-123">Updating Bash on Ubuntu on Windows</span></span>

<span data-ttu-id="37ad5-124">Два компонента Bash для Ubuntu в Windows могут требовать обновления.</span><span class="sxs-lookup"><span data-stu-id="37ad5-124">There are two components of Bash on Ubuntu on Windows that can require updating.</span></span> 

1. <span data-ttu-id="37ad5-125">Подсистема Windows для Linux</span><span class="sxs-lookup"><span data-stu-id="37ad5-125">The Windows Subsystem for Linux</span></span>
  
   <span data-ttu-id="37ad5-126">Обновление этой части Bash для Ubuntu в Windows обеспечит применение всех новых исправлений, описанных в [заметках о выпуске](https://msdn.microsoft.com/en-us/commandline/wsl/release_notes).</span><span class="sxs-lookup"><span data-stu-id="37ad5-126">Upgrading this portion of Bash on Ubuntu on Windows will enable any new fixes outlines in the [release notes](https://msdn.microsoft.com/en-us/commandline/wsl/release_notes).</span></span> <span data-ttu-id="37ad5-127">Убедитесь, что вы подписаны на Программу предварительной оценки Windows и что ваша сборка обновлена.</span><span class="sxs-lookup"><span data-stu-id="37ad5-127">Ensure that you are subscribed to the Windows Insider Program and that your build is up to date.</span></span> <span data-ttu-id="37ad5-128">Чтобы обеспечить более точное управление, включая сброс экземпляра Ubuntu, ознакомьтесь со [страницей справочных материалов по командам](https://msdn.microsoft.com/en-us/commandline/wsl/reference).</span><span class="sxs-lookup"><span data-stu-id="37ad5-128">For finer grain control including resetting your Ubuntu instance check out the [command reference page](https://msdn.microsoft.com/en-us/commandline/wsl/reference).</span></span>

2. <span data-ttu-id="37ad5-129">Двоичные файлы пользователя Ubuntu</span><span class="sxs-lookup"><span data-stu-id="37ad5-129">The Ubuntu user binaries</span></span> 

   <span data-ttu-id="37ad5-130">При обновлении этой части Bash для Ubuntu в Windows будут установлены все обновления двоичных файлов пользователя Ubuntu, включая приложения, установленные с помощью apt-get.</span><span class="sxs-lookup"><span data-stu-id="37ad5-130">Upgrading this portion of Bash on Ubuntu on Windows will install any updates to the Ubuntu user binaries including applications that you have installed via apt-get.</span></span> <span data-ttu-id="37ad5-131">Чтобы выполнить обновление, выполните следующие команды в Bash.</span><span class="sxs-lookup"><span data-stu-id="37ad5-131">To update run the following commands in Bash:</span></span>
  
   1. `apt-get update`
   2. `apt-get upgrade`
  
### <a name="apt-get-upgrade-errors"></a><span data-ttu-id="37ad5-132">Ошибки apt-get upgrade</span><span class="sxs-lookup"><span data-stu-id="37ad5-132">Apt-get upgrade errors</span></span>
<span data-ttu-id="37ad5-133">Некоторые пакеты используют функции, которые еще не реализованы.</span><span class="sxs-lookup"><span data-stu-id="37ad5-133">Some packages use features that we haven't implemented yet.</span></span> <span data-ttu-id="37ad5-134">Например, `udev`пока не поддерживается и вызывает несколько ошибок `apt-get upgrade`.</span><span class="sxs-lookup"><span data-stu-id="37ad5-134">`udev`, for example, isn't supported yet and causes several `apt-get upgrade` errors.</span></span>

<span data-ttu-id="37ad5-135">Чтобы устранить проблемы, связанные с `udev`, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="37ad5-135">To fix issues related to `udev`, follow the following steps:</span></span>

1. <span data-ttu-id="37ad5-136">Введите приведенный ниже код в `/usr/sbin/policy-rc.d` и сохраните изменения.</span><span class="sxs-lookup"><span data-stu-id="37ad5-136">Write the following to `/usr/sbin/policy-rc.d` and save your changes.</span></span>
  
   ``` BASH
   #!/bin/sh
   exit 101
   ```
  
2. <span data-ttu-id="37ad5-137">Добавьте разрешения на выполнение в `/usr/sbin/policy-rc.d`</span><span class="sxs-lookup"><span data-stu-id="37ad5-137">Add execute permissions to `/usr/sbin/policy-rc.d`</span></span>
   ``` BASH
   chmod +x /usr/sbin/policy-rc.d
   ```
  
3. <span data-ttu-id="37ad5-138">Выполните следующие команды.</span><span class="sxs-lookup"><span data-stu-id="37ad5-138">Run the following commands</span></span>
   ``` BASH
   dpkg-divert --local --rename --add /sbin/initctl
   ln -s /bin/true /sbin/initctl
   ```
  
### <a name="error-0x80040306-on-installation"></a><span data-ttu-id="37ad5-139">"Ошибка: 0x80040306" при установке</span><span class="sxs-lookup"><span data-stu-id="37ad5-139">"Error: 0x80040306" on installation</span></span>
<span data-ttu-id="37ad5-140">Это связано с тем, что мы не поддерживаем устаревшую консоль.</span><span class="sxs-lookup"><span data-stu-id="37ad5-140">This has to do with the fact that we do not support legacy console.</span></span>
<span data-ttu-id="37ad5-141">Чтобы отключить устаревшую консоль, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="37ad5-141">To turn off legacy console:</span></span>

1. <span data-ttu-id="37ad5-142">Выполните файл cmd.exe.</span><span class="sxs-lookup"><span data-stu-id="37ad5-142">Open cmd.exe</span></span>
1. <span data-ttu-id="37ad5-143">Щелкните правой кнопкой мыши строку заголовка и выберите "Свойства", затем снимите флажок "Использовать прежнюю версию консоли".</span><span class="sxs-lookup"><span data-stu-id="37ad5-143">Right click title bar -> Properties -> Uncheck Use legacy console</span></span>
1. <span data-ttu-id="37ad5-144">Нажмите кнопку "ОК".</span><span class="sxs-lookup"><span data-stu-id="37ad5-144">Click OK</span></span>

### <a name="error-0x80040154-after-windows-update"></a><span data-ttu-id="37ad5-145">"Ошибка: 0x80040154" после обновления Windows</span><span class="sxs-lookup"><span data-stu-id="37ad5-145">"Error: 0x80040154" after Windows update</span></span>
<span data-ttu-id="37ad5-146">Компонент "Подсистема Windows для Linux" может быть отключен во время обновления Windows.</span><span class="sxs-lookup"><span data-stu-id="37ad5-146">The Windows Subsystem for Linux feature may be disabled during a Windows update.</span></span> <span data-ttu-id="37ad5-147">В этом случае данную функцию Windows необходимо включить заново.</span><span class="sxs-lookup"><span data-stu-id="37ad5-147">If this happens the Windows feature must be re-enabled.</span></span> <span data-ttu-id="37ad5-148">Инструкции по включению подсистемы Windows для Linux можно найти в [руководстве по установке](https://msdn.microsoft.com/en-us/commandline/wsl/install_guide#enable-the-windows-subsystem-for-linux-feature-gui).</span><span class="sxs-lookup"><span data-stu-id="37ad5-148">Instructions for enabling the Windows Subsystem for Linux can be found in the [Installation Guide](https://msdn.microsoft.com/en-us/commandline/wsl/install_guide#enable-the-windows-subsystem-for-linux-feature-gui).</span></span>

### <a name="changing-the-display-language"></a><span data-ttu-id="37ad5-149">Изменение отображаемого языка</span><span class="sxs-lookup"><span data-stu-id="37ad5-149">Changing the display language</span></span>
<span data-ttu-id="37ad5-150">Установщик WSL попытается автоматически изменить языковой стандарт Ubuntu в соответствии с языковым стандартом установки Windows.</span><span class="sxs-lookup"><span data-stu-id="37ad5-150">WSL install will try to automatically change the Ubuntu locale to match the locale of your Windows install.</span></span>  <span data-ttu-id="37ad5-151">Если это нежелательно, можно выполнить приведенную ниже команду, чтобы изменить языковой стандарт Ubuntu после завершения установки.</span><span class="sxs-lookup"><span data-stu-id="37ad5-151">If you do not want this behavior you can run this command to change the Ubuntu locale after install completes.</span></span>  <span data-ttu-id="37ad5-152">Чтобы это изменение вступило в силу, потребуется повторно запустить bash.exe.</span><span class="sxs-lookup"><span data-stu-id="37ad5-152">You will have to relaunch bash.exe for this change to take effect.</span></span>

<span data-ttu-id="37ad5-153">В приведенном ниже примере языковой стандарт изменяется на EN-US.</span><span class="sxs-lookup"><span data-stu-id="37ad5-153">The below example changes to locale to en-US:</span></span>
``` BASH
sudo update-locale LANG=en_US.UTF8
```

### <a name="installation-issues-after-windows-system-restore"></a><span data-ttu-id="37ad5-154">Проблемы установки после восстановления системы Windows</span><span class="sxs-lookup"><span data-stu-id="37ad5-154">Installation issues after Windows system restore</span></span>
1.  <span data-ttu-id="37ad5-155">Удалите папку `%windir%\System32\Tasks\Microsoft\Windows\Windows Subsystem for Linux`.</span><span class="sxs-lookup"><span data-stu-id="37ad5-155">Delete the `%windir%\System32\Tasks\Microsoft\Windows\Windows Subsystem for Linux` folder.</span></span> <br/>
  <span data-ttu-id="37ad5-156">**Примечание. Не делайте этого, если дополнительный компонент полностью установлен и работает.**</span><span class="sxs-lookup"><span data-stu-id="37ad5-156">**Note: Do not do this if your optional feature is fully installed and working.**</span></span>
2.  <span data-ttu-id="37ad5-157">Включите дополнительный компонент WSL (если он еще не включен).</span><span class="sxs-lookup"><span data-stu-id="37ad5-157">Enable the WSL optional feature (if not already)</span></span>
3.  <span data-ttu-id="37ad5-158">Reboot</span><span class="sxs-lookup"><span data-stu-id="37ad5-158">Reboot</span></span>
4.  <span data-ttu-id="37ad5-159">Выполните команду lxrun /uninstall /full</span><span class="sxs-lookup"><span data-stu-id="37ad5-159">lxrun /uninstall /full</span></span>
5.  <span data-ttu-id="37ad5-160">Установите Bash.</span><span class="sxs-lookup"><span data-stu-id="37ad5-160">Install bash</span></span>

### <a name="no-internet-access-in-wsl"></a><span data-ttu-id="37ad5-161">Нет доступа к Интернету в WSL</span><span class="sxs-lookup"><span data-stu-id="37ad5-161">No internet access in WSL</span></span>
<span data-ttu-id="37ad5-162">Некоторые пользователи сообщили о проблемах с определенными приложениями брандмауэра, блокирующими доступ к Интернету в WSL.</span><span class="sxs-lookup"><span data-stu-id="37ad5-162">Some users have reported issues with specific firewall applications blocking internet access in WSL.</span></span>  <span data-ttu-id="37ad5-163">Сообщили о следующих брандмауэрах:</span><span class="sxs-lookup"><span data-stu-id="37ad5-163">The firewalls reported are:</span></span>

1. <span data-ttu-id="37ad5-164">Kaspersky;</span><span class="sxs-lookup"><span data-stu-id="37ad5-164">Kaspersky</span></span>
1. <span data-ttu-id="37ad5-165">AVG;</span><span class="sxs-lookup"><span data-stu-id="37ad5-165">AVG</span></span>
1. <span data-ttu-id="37ad5-166">Avast.</span><span class="sxs-lookup"><span data-stu-id="37ad5-166">Avast</span></span>

<span data-ttu-id="37ad5-167">В некоторых случаях отключение брандмауэра обеспечивает доступ.</span><span class="sxs-lookup"><span data-stu-id="37ad5-167">In some cases turning off the firewall allows for access.</span></span>  <span data-ttu-id="37ad5-168">В некоторых случаях доступ блокируется просто при наличии установленного брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="37ad5-168">In some cases simply having the firewall installed looks to block access.</span></span>

### <a name="permission-denied-error-when-using-ping"></a><span data-ttu-id="37ad5-169">Ошибка "Отказ в разрешении" при проверке связи</span><span class="sxs-lookup"><span data-stu-id="37ad5-169">Permission Denied error when using ping</span></span>
#### <a name="anniversary-updatehttpsmsdnmicrosoftcomen-uscommandlinewslrelease_notesbuild-14388-to-windows-10-anniversary-update"></a>[<span data-ttu-id="37ad5-170">Юбилейное обновление</span><span class="sxs-lookup"><span data-stu-id="37ad5-170">Anniversary Update</span></span>](https://msdn.microsoft.com/en-us/commandline/wsl/release_notes#build-14388-to-windows-10-anniversary-update) 

<span data-ttu-id="37ad5-171">Для запуска проверки связи в WSL требуются привилегии администратора в Windows.</span><span class="sxs-lookup"><span data-stu-id="37ad5-171">Administrator privileges in Windows are required to run ping in WSL.</span></span>  <span data-ttu-id="37ad5-172">Чтобы выполнить проверку связи, запустите Bash для Ubuntu в Windows от имени администратора или запустите bash.exe из командной строки или сеанса PowerShell с привилегиями администратора.</span><span class="sxs-lookup"><span data-stu-id="37ad5-172">To run ping, run Bash on Ubuntu on Windows as an administrator, or run bash.exe from a CMD/PowerShell prompt with administrator privileges.</span></span>

#### <a name="build-14926httpsmsdnmicrosoftcomen-uscommandlinewslrelease_notesbuild-14926"></a>[<span data-ttu-id="37ad5-173">Сборка 14926 и более поздние сборки</span><span class="sxs-lookup"><span data-stu-id="37ad5-173">Build 14926+</span></span>](https://msdn.microsoft.com/en-us/commandline/wsl/release_notes#build-14926)
  <span data-ttu-id="37ad5-174">Привилегии администратора больше не требуются.</span><span class="sxs-lookup"><span data-stu-id="37ad5-174">Administrator privileges no longer required.</span></span>

### <a name="bash-is-hung"></a><span data-ttu-id="37ad5-175">Bash перестал отвечать на запросы</span><span class="sxs-lookup"><span data-stu-id="37ad5-175">Bash is hung</span></span>
<span data-ttu-id="37ad5-176">Если при работе с Bash вы обнаружите, что Bash перестал отвечать на запросы (или взаимозаблокирован), помогите нам диагностировать проблему путем сбора и передачи дампа памяти.</span><span class="sxs-lookup"><span data-stu-id="37ad5-176">If while working with bash, you find that bash is hung (or deadlocked) and not responding to inputs, help us diagnose the issue by collecting and reporting a memory dump.</span></span> <span data-ttu-id="37ad5-177">Обратите внимание на то, что выполнение этих действий приведет к сбою системы.</span><span class="sxs-lookup"><span data-stu-id="37ad5-177">Note that these steps will crash your system.</span></span> <span data-ttu-id="37ad5-178">Не делайте этого, если вас это не устраивает, либо предварительно сохраните результаты своей работы.</span><span class="sxs-lookup"><span data-stu-id="37ad5-178">Do not do this if you are not comfortable with that or save your work prior to doing this.</span></span>  <br/>
<span data-ttu-id="37ad5-179">Вот как можно собрать дамп памяти.</span><span class="sxs-lookup"><span data-stu-id="37ad5-179">To collect a memory dump:</span></span>
1. <span data-ttu-id="37ad5-180">Измените тип дампа памяти на "Полный дамп памяти".</span><span class="sxs-lookup"><span data-stu-id="37ad5-180">Change the memory dump type to "complete memory dump".</span></span> <span data-ttu-id="37ad5-181">При изменении типа дампа запишите текущий тип.</span><span class="sxs-lookup"><span data-stu-id="37ad5-181">While changing the dump type, take a note of your current type.</span></span>
2. <span data-ttu-id="37ad5-182">Выполните [эти действия](https://blogs.technet.microsoft.com/askpfeplat/2015/04/05/how-to-force-a-diagnostic-memory-dump-when-a-computer-hangs/), чтобы настроить аварийное завершение с помощью клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="37ad5-182">Use the [steps](https://blogs.technet.microsoft.com/askpfeplat/2015/04/05/how-to-force-a-diagnostic-memory-dump-when-a-computer-hangs/) to configure crash using keyboard control.</span></span>
3. <span data-ttu-id="37ad5-183">Воспроизведите взаимоблокировку или прекращение ответа на запросы.</span><span class="sxs-lookup"><span data-stu-id="37ad5-183">Repro the hang or deadlock.</span></span>
4. <span data-ttu-id="37ad5-184">Выполните аварийное завершение системы с помощью последовательности клавиш из пункта 2.</span><span class="sxs-lookup"><span data-stu-id="37ad5-184">Crash the system using the key sequence from (2).</span></span>
5. <span data-ttu-id="37ad5-185">Произойдет аварийное завершение системы и будет собран дамп памяти.</span><span class="sxs-lookup"><span data-stu-id="37ad5-185">The system will crash and collect the memory dump.</span></span>
6. <span data-ttu-id="37ad5-186">После перезагрузки системы отправьте memory.dmp на адрес электронной почты secure@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="37ad5-186">Once the system reboots, report the memory.dmp to secure@microsoft.com.</span></span> <span data-ttu-id="37ad5-187">По умолчанию файл дампа находится в папке %SystemRoot%\memory.dmp или C:\Windows\memory.dmp, если C: является системным диском.</span><span class="sxs-lookup"><span data-stu-id="37ad5-187">The default location of the dump file is %SystemRoot%\memory.dmp or C:\Windows\memory.dmp if C: is the system drive.</span></span> <span data-ttu-id="37ad5-188">В письме укажите, что дамп предназначен для команды разработчиков WSL или Bash в Windows.</span><span class="sxs-lookup"><span data-stu-id="37ad5-188">In the email, note that the dump is for the WSL or Bash on Windows team.</span></span>
7. <span data-ttu-id="37ad5-189">Восстановите исходное значение типа дампа памяти.</span><span class="sxs-lookup"><span data-stu-id="37ad5-189">Restore the memory dump type to the original setting.</span></span>

### <a name="check-your-build-number"></a><span data-ttu-id="37ad5-190">Проверка номера сборки</span><span class="sxs-lookup"><span data-stu-id="37ad5-190">Check your build number</span></span>

<span data-ttu-id="37ad5-191">Чтобы узнать архитектуру компьютера и номер сборки Windows, выберите</span><span class="sxs-lookup"><span data-stu-id="37ad5-191">To find your PC's architecture and Windows build number, open</span></span>  
<span data-ttu-id="37ad5-192">**Параметры** > **Система** > **О программе**</span><span class="sxs-lookup"><span data-stu-id="37ad5-192">**Settings** > **System** > **About**</span></span>

<span data-ttu-id="37ad5-193">Найдите поля **Сборка ОС** и **Тип системы**.</span><span class="sxs-lookup"><span data-stu-id="37ad5-193">Look for the **OS Build** and **System Type** fields.</span></span>  
    <span data-ttu-id="37ad5-194">![Снимок экрана с полями "Сборка ОС" и "Тип системы"](media/system.png)</span><span class="sxs-lookup"><span data-stu-id="37ad5-194">![Screenshot of Build and System Type fields](media/system.png)</span></span> 


<span data-ttu-id="37ad5-195">Чтобы найти номер сборки Windows Server, выполните в PowerShell следующую команду.</span><span class="sxs-lookup"><span data-stu-id="37ad5-195">To find your Windows Server build number, run the following in PowerShell:</span></span>  
``` PowerShell
systeminfo | Select-String "^OS Name","^OS Version"
```

### <a name="confirm-wsl-is-enabled"></a><span data-ttu-id="37ad5-196">Подтверждение включения WSL</span><span class="sxs-lookup"><span data-stu-id="37ad5-196">Confirm WSL is enabled</span></span>
<span data-ttu-id="37ad5-197">Вы можете убедиться, что подсистема Windows для Linux включена, выполнив в PowerShell следующую команду.</span><span class="sxs-lookup"><span data-stu-id="37ad5-197">You can confirm that the Windows Subsystem for Linux is enabled by running the following in PowerShell:</span></span>  
``` PowerShell
Get-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
```

### <a name="openssh-server-connection-issues"></a><span data-ttu-id="37ad5-198">Проблемы с подключением к серверу OpenSSH</span><span class="sxs-lookup"><span data-stu-id="37ad5-198">OpenSSH-Server connection issues</span></span>
<span data-ttu-id="37ad5-199">Попытка подключения к серверу SSH завершается следующей ошибкой: "Connection closed by 127.0.0.1 port 22" (Подключение закрыто узлом 127.0.0.1 через порт 22).</span><span class="sxs-lookup"><span data-stu-id="37ad5-199">Trying to connect your SSH server is failed with the following error: "Connection closed by 127.0.0.1 port 22".</span></span>
1. <span data-ttu-id="37ad5-200">Убедитесь, что сервер OpenSSH работает</span><span class="sxs-lookup"><span data-stu-id="37ad5-200">Make sure your OpenSSH Server is running:</span></span>
   ``` BASH
   sudo service ssh status
   ```
   <span data-ttu-id="37ad5-201">и вы следовали указаниям в этом руководстве: https://help.ubuntu.com/lts/serverguide/openssh-server.html.en.</span><span class="sxs-lookup"><span data-stu-id="37ad5-201">and you've followed this tutorial: https://help.ubuntu.com/lts/serverguide/openssh-server.html.en</span></span>
2. <span data-ttu-id="37ad5-202">Завершите работу службы sshd и запустите sshd в режиме отладки.</span><span class="sxs-lookup"><span data-stu-id="37ad5-202">Stop the sshd service and start sshd in debug mode:</span></span>
   ``` BASH
   sudo service ssh stop
   sudo /usr/sbin/sshd -d
   ```
3. <span data-ttu-id="37ad5-203">Проверьте журналы запуска и убедитесь, что ключи сервера доступны и в журнале нет сообщений, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="37ad5-203">Check the startup logs and make sure HostKeys are available and you don't see log messages such as:</span></span>
   ```
   debug1: sshd version OpenSSH_7.2, OpenSSL 1.0.2g  1 Mar 2016
   debug1: key_load_private: incorrect passphrase supplied to decrypt private key
   debug1: key_load_public: No such file or directory
   Could not load host key: /etc/ssh/ssh_host_rsa_key
   debug1: key_load_private: No such file or directory
   debug1: key_load_public: No such file or directory
   Could not load host key: /etc/ssh/ssh_host_dsa_key
   debug1: key_load_private: No such file or directory
   debug1: key_load_public: No such file or directory
   Could not load host key: /etc/ssh/ssh_host_ecdsa_key
   debug1: key_load_private: No such file or directory
   debug1: key_load_public: No such file or directory
   Could not load host key: /etc/ssh/ssh_host_ed25519_key
   ```

<span data-ttu-id="37ad5-204">Если вы видите такие сообщения и в разделе `/etc/ssh/` отсутствуют ключи, потребуется повторно создать ключи или просто очистить и установить сервер OpenSSH.</span><span class="sxs-lookup"><span data-stu-id="37ad5-204">If you do see such messages and the keys are missing under `/etc/ssh/`, you will have to regenerate the keys or just purge&install openssh-server:</span></span>
```BASH
sudo apt-get purge openssh-server
sudo apt-get install openssh-server
```

