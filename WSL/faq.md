---
title: Вопросы и ответы
description: Часто задаваемые вопросы о подсистеме Windows для Linux.
keywords: Башонвиндовс, bash, WSL, Windows, виндовссубсистем, вопросы и ответы
author: taraj
ms.author: taraj
ms.date: 9/4/2018
ms.topic: article
ms.assetid: 129101ed-b88a-43c2-b6a2-cd2c4ff6fee1
ms.openlocfilehash: 2bbcec661146fcb570209fd895e6543657e98996
ms.sourcegitcommit: 939fe561d178454219adbee96c0ad3f768db2208
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2019
ms.locfileid: "67237385"
---
# <a name="frequently-asked-questions-about-windows-subsystem-for-linux"></a>Часто задаваемые вопросы о подсистеме Windows для Linux

## <a name="what-is-windows-subsystem-for-linux-wsl"></a>Что такое подсистема Windows для Linux (WSL)?
Подсистема Windows для Linux (WSL) — это новая функция Windows 10, которая позволяет запускать собственные средства командной строки Linux непосредственно в Windows, наряду с традиционными приложениями Windows Desktop и современными магазинами.

Дополнительные сведения см. на [странице о программе](./about.md) .

## <a name="who-is-wsl-for"></a>Кто WSL?
Это, в первую очередь, средство для разработчиков, особенно веб-разработчиков и тех, кто работает над проектами с открытым исходным кодом или с ними. Это позволяет пользователям, которые хотят использовать Bash, общие инструменты Linux (`sed`и `awk`т. д.) и многие инструменты Linux (Ruby, Python и т. д.), использовать их цепочки инструментов в Windows.

## <a name="what-can-i-do-with-wsl"></a>Что можно сделать с помощью WSL?
WSL предоставляет приложение с именем bash. exe, которое при запуске открывает консоль Windows, на которой выполняется оболочка bash. С помощью bash можно запускать средства и приложения командной строки Linux. Например, введите `lsb_release -a` и нажмите клавишу ВВОД. Вы увидите сведения о дистрибутив Linux в настоящее время:

![Снимок экрана со сведениями о дистрибутив](media/distro.png)

Вы также можете получить доступ к файловой системе локального компьютера из оболочки bash для Linux — вы найдете локальные диски, `/mnt` смонтированные в папке. Например, `C:` диск монтируется в `/mnt/c`:  

![Снимок экрана подключенного диска C](media/ls.png)

## <a name="what-is-bash"></a>Что такое bash?
[Bash](https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29) — это популярная текстовая оболочка и язык команд. Это оболочка по умолчанию, входящая в Ubuntu и другие дистрибутивов Linux и в macOS. Пользователи могут вводить команды в оболочку для выполнения скриптов и/или выполнения команд и средств для выполнения многих задач.

## <a name="how-does-this-work"></a>Как это работает?
Ознакомьтесь с нашим [блогом](https://blogs.msdn.microsoft.com/wsl/) , где мы подробно рассмотрим базовую технологию.

## <a name="why-would-i-use-wsl-rather-than-linux-in-a-vm"></a>Зачем использовать WSL вместо Linux в виртуальной машине?
WSL требует меньше ресурсов (ЦП, памяти и хранилища), чем полная виртуальная машина. WSL также позволяет запускать программные средства и приложения командной строки Linux вместе с приложениями командной строки Windows, настольным компьютером и магазином, а также для доступа к файлам Windows в Linux. Это позволяет использовать приложения Windows и программы командной строки Linux на одном и том же наборе файлов при желании.

## <a name="why-would-i-use-for-example-ruby-on-linux-instead-of-on-windows"></a>Зачем использовать, например, Ruby в Linux вместо Windows?
Некоторые межплатформенные средства были созданы при условии, что среда, в которой они работают, работает так же, как Linux. Например, некоторые средства предполагают, что они имеют доступ к очень длинным путям файлов или существуют определенные файлы и папки. Это часто вызывает проблемы в Windows, которые часто ведет себя иначе, чем в Linux.

Многие языки, такие как Ruby и Node, часто переносятся в Windows и работают отлично. Тем не менее, не все владельцы-драгоценные и NPMные библиотеки узлов и библиотек node/не заправляют свои библиотеки для поддержки Windows, и многие из них имеют зависимости, относящиеся к Linux. Это часто может привести к тому, что системы, созданные с помощью таких средств и библиотек, низкий от сборки и иногда могут вызвать ошибки во время выполнения или нежелательные поведения в Windows.

Это лишь часть проблем, из-за которых многие пользователи запрашивают у корпорации Майкрософт улучшения средств командной строки Windows, а также то, что привело к появлению канонических данных, чтобы обеспечить выполнение собственных программ Bash и командной строки Linux в Windows.

## <a name="what-does-this-mean-for-powershell"></a>Что это означает для PowerShell?
При работе с проектами OSS существует множество сценариев, в которых чрезвычайно полезно удалить bash из командной строки PowerShell. Поддержка Bash дополняется и усиливает значение командной строки в Windows, позволяя PowerShell и сообществу PowerShell использовать другие популярные технологии.

Дополнительные сведения см. в блоге группы разработчиков PowerShell [— bash для Windows: Зачем это замечательно и что означает PowerShell](https://blogs.msdn.microsoft.com/powershell/2016/04/01/bash-for-windows-why-its-awesome-and-what-it-means-for-powershell/)

## <a name="can-i-run-all-linux-apps-in-wsl"></a>Можно ли запускать все приложения Linux в WSL?
Нет! WSL — это средство, предназначенное для предоставления пользователям, которым требуется запускать программы командной строки Bash и Core Linux в Windows. 

WSL **не** поддерживает рабочие столы и приложения графического пользовательского интерфейса (например, GNOME, KDE и т. д.).  

Кроме того, несмотря на то, что вы сможете запускать многие популярные серверные приложения (например, Redis), мы не рекомендуем WSL для размещения производственных служб — корпорация Майкрософт предлагает разнообразные решения для запуска рабочих нагрузок Linux в Azure, Hyper-V и DOCKER. 

## <a name="what-windows-skus-is-wsl-included-in"></a>Какие номера SKU Windows входят в WSL?
Подсистема Windows для Linux доступна на настольной версии Windows для Windows 10 годовщина и авторские обновления или более поздней версии.

Начиная с версии, авторы WSL Update будут доступны как для настольных, так и для серверных продуктов Windows.

## <a name="what-processors-does-wsl-support"></a>Какие процессоры поддерживает WSL?
WSL поддерживает процессоры x64 и ARM.

## <a name="how-do-i-access-my-c-drive"></a>Разделы справки получить доступ к диску C:
Точки подключения для жестких дисков на локальном компьютере создаются автоматически и обеспечивают простой доступ к файловой системе Windows. 
 
**/МНТ/\<буква диска >/**
 
Пример использования — `cd /mnt/c` доступ к c:\

## <a name="how-do-i-use-a-windows-file-with-a-linux-app"></a>Разделы справки использовать файл Windows с приложением Linux?

Одним из преимуществ WSL является возможность доступа к файлам с помощью приложений Windows и Linux или средств. 

WSL подключает фиксированные диски `/mnt/<drive>` вашего компьютера к папке в дистрибутивов Linux. Например, `C:` диск монтируется в`/mnt/c/` 

Используя подключенные диски, можно редактировать код в, например `C:\dev\myproj\` , с помощью [Visual Studio](https://visualstudio.microsoft.com/vs/) или [VS Code](https://code.visualstudio.com/), а также создавать и тестировать код в Linux, обращаясь к тем же файлам через `/mnt/c/dev/myproj`.

> **ВАЖНОЕ ЗАМЕЧАНИЕ**. Одним из основных ограничений использования WSL является то, что прямой доступ и изменение файлов в файловой системе Linux дистрибутивов с помощью приложений или средств Windows не поддерживается. Пример [Не изменяйте файлы Linux с помощью приложений и средств Windows](https://blogs.msdn.microsoft.com/commandline/2016/11/17/do-not-change-linux-files-using-windows-apps-and-tools/)

## <a name="are-files-in-the-linux-drive-different-from-the-mounted-windows-drive"></a>Отличаются ли файлы на диске Linux от подключенного диска Windows?

1. Файлы в корне Linux (т. `/`е.) контролируются WSL, который имитирует поведение, характерное для Linux, включая, помимо прочего, следующие:
   * Файлы, содержащие недопустимые символы имени файла Windows
   * Символических ссылок, созданные для пользователей без прав администратора
   * Изменение атрибутов файла с помощью chmod и човн
   * Чувствительность к регистру файлов и папок

2. Файлы на подключенных дисках управляются Windows и имеют следующие характеристики.
   * Учитывать регистр в поддержке
   * Все разрешения настроены для наилучшего отражения разрешений Windows.

## <a name="why-are-there-so-many-errors-when-i-run-apt-get-upgrade"></a>Почему при выполнении apt-get upgrade возникает много ошибок?
Некоторые пакеты используют функции, которые еще не реализованы. `udev`, например, пока не поддерживается и вызывает несколько `apt-get upgrade` ошибок.

Чтобы устранить проблемы `udev`, связанные с, выполните следующие действия.

1. Напишите следующее в `/usr/sbin/policy-rc.d` и сохраните изменения.

    ```bash
    #!/bin/sh
    exit 101
    ```

2. Добавить разрешения на выполнение в`/usr/sbin/policy-rc.d`

    ```bash
    chmod +x /usr/sbin/policy-rc.d
    ```
  
2. Выполните следующие команды.

    ```bash
    dpkg-divert --local --rename --add /sbin/initctl
    ln -s /bin/true /sbin/initctl
    ```

## <a name="how-do-i-uninstall-a-wsl-distribution"></a>Разделы справки удалить дистрибутив WSL?

В сборках, предшествовавших 1709 (16299), откройте командную строку и выполните следующую команду:
  ```batchfile
  lxrun /uninstall /full
  ```
  
Дистрибутивы WSL, установленные из магазина, можно удалить, как и любое другое приложение Windows. для этого щелкните плитку приложения правой кнопкой мыши и выберите команду "Удалить" или через [ `Remove-AppxPackage` ](https://technet.microsoft.com/en-us/library/hh856038.aspx)PowerShell с помощью командлета.

## <a name="why-does-ping-generate-permission-denied-errors"></a>Почему команда ping создает ошибки отказа в разрешении?
В WSL Builds < 14926, требуется проверка связи WSL для запуска через консоль с повышенными правами. Эта проблема была исправлена в сборке 14926 и более поздних версиях.

## <a name="how-do-i-run-an-openssh-server"></a>Разделы справки запустить сервер OpenSSH?
Для запуска OpenSSH в WSL требуются права администратора в Windows. Чтобы запустить сервер OpenSSH, запустите Bash в Ubuntu в Windows в качестве администратора или запустите bash. exe из командной строки CMD/PowerShell с правами администратора.

## <a name="why-do-i-get-error-0x80040306-when-i-try-to-install"></a>Почему выдается сообщение об ошибке: 0x80040306 "при попытке установить?
WSL не поддерживает выполнение в устаревшей консоли. Чтобы отключить устаревшую консоль, выполните следующие действия.

1. Открытие WSL, PowerShell или cmd
1. Щелкните правой кнопкой мыши заголовок окна, > Свойства — > снимите флажок "использовать устаревшую консоль".
1. Нажмите кнопку "ОК".

## <a name="why-do-i-get-error-0x80040154-when-i-run-bashexe-after-upgrading-windows"></a>Почему выдается сообщение об ошибке: 0x80040154 при запуске bash. exe после обновления Windows?
Функция "подсистема Windows для Linux" может быть отключена во время обновления Windows. В этом случае компонент Windows необходимо включить заново. Инструкции по включению функции "подсистема Windows для Linux" можно найти в разделе [руководства по установке](https://msdn.microsoft.com/en-us/commandline/wsl/install_guide#enable-the-windows-subsystem-for-linux-feature-gui https://msdn.microsoft.com/en-us/commandline/wsl/install_guide#enable-the-windows-subsystem-for-linux-feature-gui).

## <a name="how-do-i-change-the-display-language-of-wsl"></a>Разделы справки изменить язык интерфейса WSL?
WSL Install попытается автоматически изменить языковой стандарт Ubuntu в соответствии с языковым стандартом установки Windows. Если это поведение нежелательно, можно выполнить эту команду, чтобы изменить языковой стандарт Ubuntu после завершения установки. Чтобы это изменение вступило в силу, необходимо повторно запустить Bash. exe.

В приведенном ниже примере языковой стандарт меняется на EN-US:
```bash
sudo update-locale LANG=en_US.UTF8
```

## <a name="why-do-i-not-have-internet-access-from-wsl"></a>Почему у меня нет доступа к Интернету из WSL?
Некоторые пользователи сообщили о проблемах с определенными приложениями брандмауэра, блокирующими доступ к Интернету в WSL. В отчет включены следующие брандмауэры:

1. Kaspersky
1. ОБРАЩЕНИЯ
1. аваст

В некоторых случаях отключение брандмауэра разрешает доступ. В некоторых случаях просто, когда брандмауэр установлен, будет блокировать доступ.

## <a name="how-do-i-access-a-port-from-wsl-in-windows"></a>Разделы справки доступ к порту из WSL в Windows?
WSL использует IP-адрес Windows, так как он работает в Windows. Таким образом, вы можете получить доступ к любым портам на localhost, например, если у вас есть веб https://localhost:1234 -содержимое через порт 1234, можно в браузере Windows.

## <a name="how-can-i-back-up-my-wsl-distros"></a>Как можно создать резервную копию WSL дистрибутивов?

Лучший способ резервного копирования дистрибутивов доступен в Windows версии 1809 и более поздних. Вы можете экспортировать полное распространение в tarball с помощью `wsl --export` команды. Затем можно импортировать этот дистрибутив обратно в WSL с помощью `wsl --import` команды, что позволяет создавать резервные копии и сохранять состояния дистрибутивов WSL. 

Обратите внимание, что традиционные службы резервного копирования, которые файлы резервных копий в папках AppData (например, Windows Backup), не будут повредить файлы Linux. 



## <a name="where-can-i-provide-feedback"></a>Где можно отправить отзыв?

Вы можете поделиться отзывами и задать вопросы по нескольким каналам: Отзывы и вопросы должны быть направлены:
* Наш [средство записи проблем GitHub](https://github.com/Microsoft/BashOnWindows/issues)
* Наш [портал командной строки UserVoice](https://wpdev.uservoice.com/forums/266908-command-prompt/filters/top)
* [Блог команды командной строки](https://blogs.msdn.microsoft.com/commandline/)
* Через Twitter. [@richturn_ms](https://twitter.com/richturn_MS) Ознакомьтесь с Twitter, чтобы узнать о новостях, обновлениях и т. д.
